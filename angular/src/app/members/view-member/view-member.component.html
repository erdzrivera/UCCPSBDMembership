<div class="card" *ngIf="member">
    <div class="card-header bg-white">
        <div class="row align-items-center">
            <div class="col">
                <h2 class="custom-page-title mb-0">
                    <i class="fa fa-user me-2"></i> {{ '::Member Details' | abpLocalization }}
                </h2>
            </div>
            <div class="col-auto">
                <a routerLink="/members" class="btn btn-secondary">
                    <i class="fa fa-arrow-left me-1"></i>
                    {{ '::Back' | abpLocalization }}
                </a>
                <span class="d-inline-block" [title]="certificateValidationMessage" tabindex="0">
                    <a routerLink="/members/{{member.id}}/certificate" class="btn btn-info ms-2 text-white"
                        [class.disabled]="!canGenerateCertificate"
                        [attr.aria-disabled]="!canGenerateCertificate ? true : null">
                        <i class="fa fa-certificate me-1"></i>
                        {{ '::Generate Certificate' | abpLocalization }}
                    </a>
                </span>
                <button class="btn btn-primary ms-2" (click)="onEdit()">
                    <i class="fa fa-pencil me-1"></i>
                    {{ '::Edit' | abpLocalization }}
                </button>
                <button class="btn btn-danger ms-2" (click)="onDelete()">
                    <i class="fa fa-trash me-1"></i>
                    {{ '::Delete' | abpLocalization }}
                </button>
            </div>
        </div>
    </div>
    <div class="card-body">
        <div class="row">
            <!-- Left Column: Personal & Membership -->
            <div class="col-md-6">
                <!-- Personal Information -->
                <div class="card mb-3 shadow-sm border-0 bg-light">
                    <div class="card-body">
                        <h6 class="card-subtitle mb-3 text-primary border-bottom pb-2">
                            <i class="fa fa-user me-1"></i> Personal Information
                        </h6>
                        <div class="row">
                            <div class="col-md-12 mb-2">
                                <label class="text-muted small">Full Name</label>
                                <div class="fw-bold">{{ member.firstName }} {{ member.middleName ? member.middleName + '
                                    ' : '' }}{{ member.lastName }}</div>
                            </div>
                            <div class="col-md-6 mb-2">
                                <label class="text-muted small">Birthday</label>
                                <div>{{ member.birthday | date: 'mediumDate' }}</div>
                            </div>
                            <div class="col-md-6 mb-2">
                                <label class="text-muted small">Place of Birth</label>
                                <div>{{ member.placeOfBirth || '-' }}</div>
                            </div>
                            <div class="col-md-6 mb-2">
                                <label class="text-muted small">Father's Name</label>
                                <div>{{ member.fatherName || '-' }}</div>
                            </div>
                            <div class="col-md-6 mb-2">
                                <label class="text-muted small">Mother's Name</label>
                                <div>{{ member.motherName || '-' }}</div>
                            </div>
                            <div class="col-md-12 mb-2">
                                <label class="text-muted small">Occupation</label>
                                <div>{{ member.occupation || '-' }}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Membership Details -->
                <div class="card mb-3 shadow-sm border-0 bg-light">
                    <div class="card-body">
                        <h6 class="card-subtitle mb-3 text-primary border-bottom pb-2">
                            <i class="fa fa-id-card me-1"></i> Membership Details
                        </h6>
                        <div class="row">
                            <div class="col-md-6 mb-2">
                                <label class="text-muted small">Organization</label>
                                <div><span class="badge bg-secondary">{{ member.organizationId || 'None' }}</span></div>
                            </div>
                            <div class="col-md-6 mb-2">
                                <label class="text-muted small">Membership Type</label>
                                <div><span class="badge bg-info text-dark">{{ member.memberTypeId || 'None' }}</span>
                                </div>
                            </div>
                            <div class="col-md-6 mb-2">
                                <label class="text-muted small">Status</label>
                                <div>
                                    <span class="badge" [ngClass]="member.isActive ? 'bg-success' : 'bg-danger'">
                                        {{ member.isActive ? 'Active' : 'Inactive' }}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Baptismal Info -->
            <div class="col-md-6">
                <div class="card mb-3 shadow-sm border-0 bg-light h-100">
                    <div class="card-body">
                        <h6 class="card-subtitle mb-3 text-primary border-bottom pb-2">
                            <i class="fa fa-water me-1"></i> Baptismal Information
                        </h6>

                        <div class="mb-3">
                            <label class="text-muted small">Baptism Date</label>
                            <div class="fw-bold">{{ member.baptismDate | date: 'longDate' }}</div>
                        </div>

                        <div class="mb-3">
                            <label class="text-muted small">Baptized By</label>
                            <div class="fw-bold fs-5">{{ member.baptizedBy || '-' }}</div>
                        </div>

                        <div class="mb-3">
                            <label class="text-muted small">Sponsors</label>
                            <div class="p-2 bg-white rounded border" style="white-space: pre-wrap; min-height: 100px;">
                                {{ member.sponsors || '-' }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<app-member-modal [(visible)]="isModalOpen" [memberId]="member.id" (saved)="onSaved()"></app-member-modal>